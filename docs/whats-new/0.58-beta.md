# What's New in v0.58-beta "Streamline"

**Release Date:** October 7-9, 2025
**Codename:** Streamline
**Status:** Beta (Linux only, macOS/Windows coming soon)

---

## ğŸ¯ Overview

Version 0.58-beta represents a major milestone in making Hei-DataHub easier to install, deploy, and manage. The "Streamline" release focuses on modern Python tooling with UV, proper packaging, desktop integration, and robust diagnosticsâ€”all while maintaining the local-first philosophy.

**Key Theme:** Making installation and deployment frictionless for Linux users.

---

## ğŸš€ Major Features

### 1. UV-Based Installation

**No cloning required!** Install Hei-DataHub directly from the private GitHub repository using modern UV tooling.

#### Ephemeral Runs
Test the application without installing:
```bash
# With SSH
uvx "git+ssh://git@github.com/0xpix/Hei-DataHub.git@main"

# With Personal Access Token
export GH_PAT=ghp_xxxxxxxxxxxxx
uvx "git+https://${GH_PAT}@github.com/0xpix/Hei-DataHub@main"
```

#### Persistent Installation
Install globally for all terminal sessions:
```bash
# With SSH (recommended)
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@main"

# With HTTPS + Token
export GH_PAT=ghp_xxxxxxxxxxxxx
uv tool install "git+https://${GH_PAT}@github.com/0xpix/Hei-DataHub@main"

# Run from anywhere
hei-datahub
```

#### Version Pinning
Lock to specific versions:
```bash
# Specific release tag
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@v0.58.1-beta"

# Development branch
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@chore/feature-branch"

# Specific commit
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@abc123"
```

**Why UV?**
- âš¡ **Fast:** 10-100x faster than pip
- ğŸ”’ **Secure:** Built-in authentication for private repos
- ğŸ“¦ **Smart:** Automatic dependency resolution
- ğŸ¯ **Simple:** One command to install, no virtual env management

---

### 2. Linux Desktop Integration

Launch Hei-DataHub from your application menu like any other desktop application.

#### Creating Desktop Launcher
```bash
# After installing with UV
bash scripts/create_desktop_entry.sh
```

**What it does:**
- Creates XDG-compliant `.desktop` entry in `~/.local/share/applications/`
- Auto-detects installed executable path
- Updates desktop database for immediate visibility
- Works with GNOME, KDE, XFCE, Cinnamon, MATE, and more

**Features:**
- ğŸ–¥ï¸ Appears in application menu
- ğŸ” Searchable by name
- ğŸ“Œ Can be added to favorites/dock
- ğŸ¨ Branded with Hei-DataHub logo

---

### 3. Complete Data Packaging

**Fixed:** Previous versions had missing data files after installation.

**Now included:**
- âœ… Sample datasets (4 complete examples)
- âœ… SQL schemas for database initialization
- âœ… JSON validation schemas
- âœ… Configuration templates
- âœ… Asset files (logos, icons)
- âœ… Documentation includes

**Technical details:**
- Added comprehensive `MANIFEST.in`
- Updated `pyproject.toml` with package-data configuration
- Created `hei_datahub` alias package for naming consistency
- Fixed workspace initialization to use bundled data

**Result:** Installation just worksâ€”no extra downloads or setup needed.

---

### 4. System Diagnostics

New `hei-datahub doctor` command provides comprehensive health checks.

```bash
hei-datahub doctor
```

**Checks performed:**
- ğŸ–¥ï¸ **OS Detection** â€” Identifies Linux, macOS, or Windows
- ğŸ“‚ **Data Directory** â€” Verifies existence and accessibility
- ğŸ” **Permissions** â€” Checks read/write access
- ğŸ“Š **Database** â€” Validates SQLite schema and integrity
- ğŸ—‚ï¸ **Datasets** â€” Counts and validates YAML metadata
- ğŸ”„ **Migration** â€” Detects legacy path structures
- ğŸ“ **Filename Sanitation** â€” Checks for illegal characters (Windows)

**Exit codes:**
- `0` â€” All healthy
- `1` â€” Data directory issues
- `2` â€” Permission errors
- `3` â€” Data/database problems

**Output format:**
- Clear, structured sections
- Actionable suggestions
- Copy-pasteable commands
- Script-friendly for automation

---

### 5. Data Directory Control

Flexible workspace location with clear override hierarchy.

#### CLI Override
```bash
# Temporary override for single run
hei-datahub --data-dir /path/to/custom/workspace

# Works with all commands
hei-datahub doctor --data-dir /tmp/test-workspace
hei-datahub reindex --data-dir ~/projects/my-data
```

#### Environment Variable
```bash
# Persistent override for session
export HEIDATAHUB_DATA_DIR=/path/to/custom/workspace
hei-datahub

# Add to ~/.bashrc or ~/.zshrc for permanent
echo 'export HEIDATAHUB_DATA_DIR=~/my-datahub' >> ~/.bashrc
```

#### Override Precedence
1. **CLI flag** (`--data-dir`) â€” Highest priority
2. **Environment variable** (`HEIDATAHUB_DATA_DIR`) â€” Medium priority
3. **OS default** â€” Fallback

#### OS-Specific Defaults
- **Linux:** `~/.local/share/Hei-DataHub` (XDG-compliant)
- **macOS:** `~/Library/Application Support/Hei-DataHub`
- **Windows:** `%LOCALAPPDATA%\Hei-DataHub`

---

### 6. XDG Compliance (Linux)

Follows Linux desktop standards for data storage.

**Before (v0.57):**
- Used `~/.hei-datahub/` (non-standard)

**After (v0.58):**
- Uses `~/.local/share/Hei-DataHub/` (XDG Base Directory Specification)

**Migration:**
- Automatic detection of legacy paths
- One-time notification with migration instructions
- Marker file prevents repeated notices
- No data lossâ€”explicit user migration

---

### 7. Enhanced Documentation

Complete installation documentation for v0.58.

**New docs directory:** `docs/installation/`

1. **README.md** â€” Overview and quick start
2. **uv-quickstart.md** â€” Complete UV installation guide
3. **private-repo-access.md** â€” SSH and PAT setup
4. **desktop-version.md** â€” Desktop launcher guide
5. **troubleshooting.md** â€” Common issues and solutions
6. **windows-notes.md** â€” Windows-specific instructions (preview)

**Updated docs:**
- Main README with UV quickstart
- Installation section in user guide
- What's New (this document)

---

## ğŸ”§ Technical Changes

### Package Structure
- **Package name:** `hei-datahub` (changed from `mini-datahub`)
- **Source directory:** `src/mini_datahub/` (internal)
- **Alias package:** `src/hei_datahub/` (for naming consistency)
- **Entry points:** Both `hei-datahub` and `mini-datahub` commands work

### Workspace Detection
Improved logic for UV installations:
```python
def _get_workspace_root():
    # 1. UV/pip installation â†’ Always ~/.local/share/Hei-DataHub
    if is_installed:
        return xdg_data_home / "Hei-DataHub"

    # 2. Environment variable override
    if HEIDATAHUB_DATA_DIR:
        return Path(HEIDATAHUB_DATA_DIR)

    # 3. Development mode (repo with src/)
    if is_dev_mode:
        return repo_root

    # 4. Default fallback
    return xdg_data_home / "Hei-DataHub"
```

### Dependency Updates
- **Minimum Python:** 3.10+ (was 3.9+)
- **Textual:** >=0.47.0
- **Pydantic:** >=2.0.0
- All other dependencies pinned to stable versions

---

## ğŸ“Š Breaking Changes

### Python Version
- **Old:** Python 3.9+
- **New:** Python 3.10+
- **Reason:** Better type hints, pattern matching, improved asyncio

### Data Directory Location (Linux)
- **Old:** `~/.hei-datahub/`
- **New:** `~/.local/share/Hei-DataHub/`
- **Migration:** Manual (with detection and notification)
- **Impact:** Existing users need to move data or use `--data-dir` flag

### Package Name
- **Old:** `mini-datahub` (in pyproject.toml)
- **New:** `hei-datahub` (primary)
- **Compatibility:** `mini-datahub` command still works
- **Impact:** Minimalâ€”both commands function identically

---

## ğŸ› Bug Fixes

### Data Files Missing
- **Issue:** UV/pip installations had "FileNotFoundError" for data files
- **Cause:** Incomplete package data configuration
- **Fix:** Added MANIFEST.in and proper pyproject.toml package-data
- **Status:** âœ… Resolved

### Import Errors After Installation
- **Issue:** Module not found errors for internal packages
- **Cause:** Package structure inconsistencies
- **Fix:** Created alias package and proper __main__.py entry points
- **Status:** âœ… Resolved

### Workspace Location Confusion
- **Issue:** Running from repo used repo's data, not installed workspace
- **Cause:** No detection for installed vs development mode
- **Fix:** Added installation detection via site-packages check
- **Status:** âœ… Resolved

---

## ğŸ“ Migration Guide

### For Existing Linux Users (v0.57 â†’ v0.58)

#### Option 1: Move Data to New Location (Recommended)
```bash
# Backup old data
cp -r ~/.hei-datahub ~/.hei-datahub.backup

# Move to new XDG location
mkdir -p ~/.local/share/Hei-DataHub
mv ~/.hei-datahub/* ~/.local/share/Hei-DataHub/

# Test
hei-datahub

# If all works, remove backup
rm -rf ~/.hei-datahub.backup
```

#### Option 2: Use Environment Variable
```bash
# Keep using old location
export HEIDATAHUB_DATA_DIR=~/.hei-datahub

# Add to shell config for persistence
echo 'export HEIDATAHUB_DATA_DIR=~/.hei-datahub' >> ~/.bashrc
source ~/.bashrc

# Test
hei-datahub
```

#### Option 3: Use CLI Flag
```bash
# Specify old location each time
hei-datahub --data-dir ~/.hei-datahub
```

---

## ğŸ§ª Testing & Validation

### Installation Testing
```bash
# Clean test environment
uv tool uninstall hei-datahub
rm -rf ~/.local/share/Hei-DataHub

# Fresh install
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@main"

# Verify version
hei-datahub --version
# Expected: Hei-DataHub 0.58.1-beta

# Run diagnostics
hei-datahub doctor
# Expected: Exit code 0 (all healthy)

# Launch TUI
hei-datahub
# Expected: 4 sample datasets visible
```

### Desktop Integration Testing
```bash
# Create launcher
bash scripts/create_desktop_entry.sh

# Update desktop database
update-desktop-database ~/.local/share/applications/

# Verify entry created
ls -la ~/.local/share/applications/hei-datahub.desktop

# Test from application menu
# Open your application menu and search for "Hei-DataHub"
```

---

## ğŸ¯ Platform Support

### âœ… Fully Supported (v0.58)
- **Linux** (x86_64, aarch64)
  - Ubuntu 20.04+
  - Debian 11+
  - Fedora 35+
  - Arch Linux
  - Other systemd-based distributions

### ğŸš§ Coming Soon
- **macOS** (Intel, Apple Silicon) â€” v0.59
- **Windows** (10, 11) â€” v0.59

---

## ğŸ”® Future Plans

### v0.59 (Next Release)
- macOS desktop integration (`.app` bundle)
- Windows desktop integration (Start Menu)
- Binary distributions for all platforms
- Homebrew formula (macOS)
- Chocolatey package (Windows)
- AppImage for Linux

### v0.60
- Auto-update mechanism
- Plugin system
- Advanced search operators
- Multi-workspace support

---

## ğŸ“š Documentation

### New Guides
- [Installation Guide](../installation/README.md) â€” Complete installation reference
- [UV Quick Start](../installation/uv-quickstart.md) â€” Modern Python tooling
- [Private Repo Access](../installation/private-repo-access.md) â€” SSH and PAT setup
- [Desktop Version](../installation/desktop-version.md) â€” Linux launcher guide
- [Troubleshooting](../installation/troubleshooting.md) â€” Common issues

### Updated Guides
- [README](../../README.md) â€” Updated with UV installation
- [Getting Started](../getting-started/01-getting-started.md) â€” Updated prerequisites
- [Index](../index.md) â€” Added v0.58 features

---

## ğŸ™ Acknowledgments

Special thanks to:
- **Astral** for creating UV (blazingly fast Python tooling)
- **XDG** for desktop standards
- **Textual** for the TUI framework
- All beta testers and early adopters

---

## ğŸ“ Support

### Getting Help
- **Documentation:** [https://0xpix.github.io/Hei-DataHub/](https://0xpix.github.io/Hei-DataHub/)
- **Issues:** Open an issue on GitHub
- **Discussions:** GitHub Discussions (coming soon)

### Reporting Bugs
When reporting issues with v0.58, include:
```bash
# System information
hei-datahub doctor

# Version details
hei-datahub --version-info

# Installation method (UV, pip, binary)
```

---

## ğŸ‰ Try It Now!

### Quick Start (Linux)
```bash
# Install UV
curl -LsSf https://astral.sh/uv/install.sh | sh

# Install Hei-DataHub
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@main"

# Create desktop launcher
bash scripts/create_desktop_entry.sh

# Launch!
hei-datahub
```

**Welcome to the Streamline era! ğŸš€**
