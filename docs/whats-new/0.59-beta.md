# What's New in v0.59-beta "Privacy"

**Release Date:** October 2025
**Codename:** Privacy
**Status:** Beta Release

---

## ğŸ¯ Release Highlights

Version 0.59 represents a major shift toward **privacy-first, cloud-native workflows**. This release introduces secure WebDAV authentication, removes GitHub dependencies, and significantly improves application performance and UX.

### Key Themes:

- ğŸ” **Privacy & Security**: Secure credential storage, no Git history, comprehensive security documentation
- â˜ï¸ **Cloud-Native**: Direct WebDAV integration with HeiBox, cloud-only workflow
- âš¡ **Performance**: Dramatic speed improvements (startup <300ms, search <80ms)
- ğŸ¨ **UX Enhancements**: Smart autocomplete, visual badges, better keybindings
- ğŸ› ï¸ **Developer Tools**: Auth diagnostics, status indicators, dataset management

---

## ğŸ” Privacy & Security Features

### WebDAV Secure Authentication System

Complete authentication infrastructure for secure credential management:
#### Interactive Setup Wizard

- **Interactive mode** with guided prompts
- **Non-interactive mode** for automation (`--url`, `--token`, `--username` flags)
- **Secure storage** in Linux keyring (Secret Service)
- **Environment fallback** when keyring unavailable
- **Credential validation** with retry support
- **TOML configuration** at `~/.config/hei-datahub/config.toml`

```bash
# Interactive setup
hei-datahub auth setup

# Non-interactive with token
hei-datahub auth setup \
  --url https://heibox.uni-heidelberg.de/seafdav \
  --username alice \
  --token "$TOKEN" \
  --non-interactive
```

**Alias:** `hei-datahub setup` also works

#### Check Configuration
View current authentication configuration:
```bash
$ hei-datahub auth status
ğŸ” WebDAV Authentication Status

Method:     token
URL:        https://heibox.uni-heidelberg.de/seafdav
Username:   alice
Storage:    keyring
Key ID:     webdav:token:alice@heibox.uni-heidelberg.de
```

#### Deep Diagnostics
Comprehensive authentication and connectivity diagnostics:

**Checks performed:**

- âœ… Config file existence and TOML validity
- âœ… Credentials presence in keyring/env
- âœ… Network reachability (DNS + TCP)
- âœ… WebDAV authentication (PROPFIND)
- âœ… Write permissions (PUT/DELETE test)
- âœ… Clock skew detection
- âœ… Mount path awareness

**Features:**

- Human-readable output with colored icons
- JSON output mode (`--json`)
- Smart error hints for common issues
- Exit codes for automation (0=OK, 2-5=various errors)

```bash
# Run diagnostics
hei-datahub auth doctor

# JSON output for scripts
hei-datahub auth doctor --json

# Skip write tests
hei-datahub auth doctor --no-write
```

#### Remove Credentials
Safe credential removal with confirmation:
```bash
# Interactive (with confirmation)
hei-datahub auth clear

# Force without confirmation
hei-datahub auth clear --force

# Also clear search index
hei-datahub auth clear --clear-index
```

### Privacy Documentation

New comprehensive security documentation:

- **[Privacy & Security Guide](../privacy-and-security.md)** - Complete security model explanation
- Credential storage mechanisms
- Threat model analysis
- Best practices
- Security checklist

---

## â˜ï¸ Cloud-Native Workflow

### Cloud-Only Storage Model

**Breaking Change:** Hei-DataHub now operates in **cloud-only mode** by default.

#### What Changed:

- âŒ Removed local filesystem storage option
- âœ… All datasets saved directly to WebDAV (HeiBox)
- âœ… No more Git commits or pull requests
- âœ… Direct cloud upload on dataset creation

#### Benefits:

- **Better privacy**: No Git history of dataset changes
- **Simpler workflow**: No need to manage local vs cloud storage
- **Instant sync**: Changes immediately visible to team
- **No conflicts**: Direct WebDAV writes eliminate merge issues

### Enhanced Cloud Dataset Management

#### Edit Cloud Datasets
Press **`e`** on any cloud dataset to edit metadata:

- Full editing capabilities (name, description, source, tags, keywords, license)
- Direct WebDAV upload on save (Ctrl+S)
- Automatic search index update
- Cancel with confirmation (Esc)

#### HeiBox Status Indicator
Real-time connection status in TUI:

- **`Synced to Hei-box`** - Connected and authenticated
- **`Hei-box Not Connected`** - Offline or not configured

Status checks:

- Config file presence
- Valid credentials in keyring
- Server reachability (quick HEAD request)
- Updates automatically on auth changes

---

## âš¡ Performance Improvements

### Dramatic Speed Boost

**Before v0.59:**

- Startup: ~3-5 seconds
- Search: 500-2000ms per keystroke
- Network calls during every search

**After v0.59:**

- Startup: **<300ms** (10-15x faster!)
- Search: **<80ms** per keystroke (6-25x faster!)
- Network: **Zero calls** during search

### How It Works

#### Local SQLite FTS5 Index
- Database location: `~/.cache/hei-datahub/index.db`
- Full-text search with FTS5
- Queries: <20ms for 10,000+ datasets
- Automatic updates on add/edit/delete

#### Background Sync
- Asynchronous indexing after UI loads
- Incremental sync every 15 minutes
- Shallow WebDAV listing (Depth: 1)
- Non-blocking operations

#### Search Debouncing
- 200ms debounce on keystrokes
- Coalesces rapid typing
- Cancellable queries
- Configurable via `HEI_DATAHUB_SEARCH_DEBOUNCE_MS`

### Automatic Index Updates

**No more manual reindexing!** The search index updates automatically when you:

- âœ… Add a dataset (local or cloud)
- âœ… Edit dataset metadata
- âœ… Delete a dataset
- âœ… Upload to cloud

The `rebuild_index.py` script is now rarely needed.

---

## ğŸ¨ TUI UX Improvements

### Smart Autocomplete

Context-aware autocomplete with metadata extraction:

#### Features:

- **Field-aware suggestions**: Different suggestions for `project:`, `source:`, `tag:`, `owner:`, `type:`, `format:`
- **Two-level completion**:
    - Type `so` â†’ suggests `source:` (field name)
    - Type `source:` â†’ suggests actual source URLs (field values)
- **Intelligent ranking**:
    - 2.0Ã— weight for prefix matches
    - 1.5Ã— weight for frequency
    - 1.2Ã— weight for recency
    - 0.5Ã— weight for alphabetical order
- **Usage tracking**: Learns from your search patterns
- **5-minute cache**: Fast repeated queries

#### Size Buckets:
Smart size filtering with human-readable buckets:

- `size:tiny` - < 10MB
- `size:small` - 10-100MB
- `size:medium` - 100MB-1GB
- `size:large` - 1-10GB
- `size:xl` - > 10GB

### Enhanced Filter Badges

Visual filter type indicators with operator-specific emoji:

| Filter Type | Emoji | Example |
|------------|-------|---------|
| Field filter (`:`) | ğŸ· | `ğŸ· project:ML` |
| Exact match (`=`) | ğŸ¯ | `ğŸ¯ type=dataset` |
| Greater than (`>`) | ğŸ“ˆ | `ğŸ“ˆ size>100MB` |
| Less than (`<`) | ğŸ“‰ | `ğŸ“‰ year<2020` |
| Greater or equal (`>=`) | â¬†ï¸ | `â¬†ï¸ records>=1000` |
| Less or equal (`<=`) | â¬‡ï¸ | `â¬‡ï¸ version<=2.0` |
| Free text | ğŸ“ | `ğŸ“ neural network` |

**Benefits:**

- Instant visual identification of filter types
- Better visual hierarchy
- Easier to understand complex queries

### New Logo Color Design

The logo got a new color design:

<p align="left">
  <img src="../../assets/Hei-datahub-logo-main.svg" alt="Logo Main" width="200"/>
</p>

<p align="left">
  <img src="../../assets/Hei-datahub-logo-round.svg" alt="Logo round" width="200"/>
  <img src="../../assets/Hei-datahub-logo-H.svg" alt="Logo H" width="200"/>
</p>

<p align="left">
  <img src="../../assets/Hei-datahub-logo-inline.svg" alt="Logo inline" width="400"/>
</p>

### Dataset Management Enhancements

#### Delete Functionality
Press **`d`** to delete datasets:

- Confirmation dialog before deletion
- Removes from local storage
- Removes from search index
- Works for both local and cloud datasets

#### Undo Support
Edit datasets with confidence:

- Undo button (Ctrl+Z concept) when editing
- Revert changes before saving
- Works with both local and cloud datasets

#### Open URLs Directly
Press **`o`** on dataset details to open source URLs:

- Opens in default browser
- Works for both local and cloud datasets
- Validates URL format before opening
- Clear notifications on success/failure

---

## ğŸ—‘ï¸ Removed Features

As part of the cloud-native transition, several legacy features were removed:

### Removed: Outbox Feature
- **What it was**: Queue for failed pull requests
- **Why removed**: No longer needed with direct WebDAV workflow
- **Migration**: N/A - direct cloud uploads don't fail and queue

### Removed: Theme & Preferences UI
- **What it was**: Settings screen for theme selection
- **Why removed**: Streamlined settings to focus on WebDAV config
- **Alternative**: Theme still configurable via `config.yaml`

### Removed: GitHub Integration UI
- **What it was**: GitHub settings screen in TUI
- **Why removed**: Replaced with WebDAV configuration
- **Alternative**: WebDAV settings now in main settings (press `S`)

---

## ğŸ”§ Changed Behaviors

### Settings Screen (Press `S`)
- **Old**: GitHub Integration configuration
- **New**: WebDAV (HeiBox) configuration
- Direct access to credentials and server settings
- No intermediate menu - goes straight to WebDAV config

### Update Check (Press `U`)
- **Old**: "Pull" updates
- **New**: "Update" (renamed for clarity)
- Checks for catalog updates from remote
- Notifications show "Press **U** to update" instead of "pull"

### Dataset Opening
- **Old**: Conditional check for storage backend (filesystem vs webdav)
- **New**: Always opens cloud preview (cloud-only mode)
- Simpler code path, no backend switching

---

## ğŸ“š New Documentation

### Installation & Setup
- **[Auth Setup Linux Guide](../installation/auth-setup-linux.md)** - Complete WebDAV setup walkthrough
  - Interactive wizard usage
  - Non-interactive automation
  - Keyring vs environment storage
  - Troubleshooting common issues

### Privacy & Security
- **[Privacy and Security](../privacy-and-security.md)** - Comprehensive security documentation
  - Security model and principles
  - Credential storage mechanisms
  - Data storage and network communication
  - Threat model analysis
  - Best practices and security checklist

---

## ğŸ› Bug Fixes

### Search & Index
- Fixed: Search not showing cloud datasets immediately after upload
- Fixed: Index not updating after dataset edits
- Fixed: Slow search performance with large catalogs

### Cloud Integration
- Fixed: Cloud datasets missing edit functionality
- Fixed: Status indicator not updating after auth setup
- Fixed: WebDAV connection not validated properly

### TUI
- Fixed: Duplicate autocomplete method definition
- Fixed: Cloud dataset details missing 'o' key binding
- Fixed: Inconsistent badge colors for filter types

---

## ğŸ“¦ Installation

### New Installation

```bash
# Install UV (if not already installed)
curl -LsSf https://astral.sh/uv/install.sh | sh

# Install Hei-DataHub
uv tool install "git+ssh://git@github.com/0xpix/Hei-DataHub.git@release/0.59-beta"

# Set up authentication
hei-datahub auth setup

# Run it
hei-datahub
```

### Upgrade from v0.58

```bash
# Update to v0.59
hei-datahub update

# Set up WebDAV auth (new in v0.59)
hei-datahub auth setup

# Verify
hei-datahub auth doctor
```

---

## ğŸ“– Documentation

### New Guides
- [Auth Setup (Linux)](../installation/auth-setup-linux.md) - Complete WebDAV authentication guide
- [Privacy & Security](../privacy-and-security.md) - Security model and best practices

### Updated Guides
- [Getting Started](../getting-started/01-getting-started.md) - Updated for v0.59 workflow
- [How to Add Datasets](../how-to/05-first-dataset.md) - Cloud-only workflow
- [How to Edit Datasets](../how-to/06-edit-datasets.md) - Cloud editing support
- [CLI Reference](../reference/13-cli-reference.md) - New auth commands

---

## ğŸ”œ What's Next

### Planned for v0.60
- The `CLEAN-UP`

---

## ğŸ“ Release Notes Summary

**v0.59-beta "Privacy"** - October 2025

- ğŸ” **Security**: WebDAV auth with secure keyring storage
- â˜ï¸ **Cloud**: Direct HeiBox integration, cloud-only workflow
- âš¡ **Performance**: 10-25x faster startup and search
- ğŸ¨ **UX**: Smart autocomplete, visual badges, better keybindings
- ğŸ› ï¸ **Tools**: Auth diagnostics, status indicators, dataset management
- ğŸ“š **Docs**: Privacy guide, auth setup guide, updated references

**Breaking**: Local storage removed, GitHub integration removed from TUI
**Migration**: Run `hei-datahub auth setup` to configure WebDAV
