# UI Reference

**(req. Hei-DataHub 0.59-beta or later)**

## TUI Overview

Hei-DataHub is built with [Textual](https://textual.textualize.io/), a modern Python TUI framework. The interface is designed for **keyboard-first workflows** with Vim-style keybindings and **cloud-first storage** via Heibox/WebDAV.

---

## Screen Layouts

### Home Screen

The main screen where you search and browse datasets stored in Heibox.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEI DATAHUB                                   [X] [_] [â– ]  â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   _   _ _____ ___     ____    _  _____  _    _   _ _   _   â”‚
â”‚  | | | | ____|_ _|   |  _ \  / \|_   _|/ \  | | | | | | |  â”‚  â† ASCII Banner
â”‚  | |_| |  _|  | |    | | | |/ _ \ | | / _ \ | |_| | | | |  â”‚
â”‚  |  _  | |___ | |    | |_| / ___ \| |/ ___ \|  _  | |_| |  â”‚
â”‚  |_| |_|_____|___|   |____/_/   \_\_/_/   \_\_| |_|\___/   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” Search Datasets  |  Mode: Normal                        â”‚  â† Mode Indicator
â”‚  â˜ Synced to Hei-box                                        â”‚  â† Heibox Status
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Type / to search, j/k to navigate...]                     â”‚  â† Search Input
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  All Datasets (12 total)                                    â”‚  â† Results Label
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ID              â”‚ Name            â”‚ Description        â”‚ â”‚  â† Results Table
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ weather-q1      â”‚ Weather Q1 Data â”‚ Quarterly weather  â”‚ â”‚
â”‚  â”‚ burned-area     â”‚ Burned Area     â”‚ MODIS burned area  â”‚ â”‚
â”‚  â”‚ ...             â”‚ ...             â”‚ ...                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  A: Add  S: Settings  R: Refresh  Q: Quit                   â”‚  â† Footer
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Status Indicators:**

- `ïƒ‚ Synced to Hei-box` - Connected and synced
- `âš  Hei-box Configured (connection failed)` - Credentials set but can't connect
- `â—‹ Hei-box Not Connected` - No credentials configured

---

### Details Screen

Shows full metadata for a selected dataset.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEI DATAHUB - Dataset Details                             â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Dataset: Weather Q1 Data                                  â”‚
â”‚                                                            â”‚
â”‚  ID: weather-q1                                            â”‚
â”‚  Name: Weather Q1 Data                                     â”‚
â”‚  Description:                                              â”‚
â”‚    Quarterly weather dataset covering January-March 2024   â”‚
â”‚    with temperature, precipitation, and wind data.         â”‚
â”‚                                                            â”‚
â”‚  Source: https://example.com/weather/q1                    â”‚
â”‚  Date Created: 2024-01-15                                  â”‚
â”‚  Storage Location: s3://weather-data/q1/                   â”‚
â”‚  File Format: CSV                                          â”‚
â”‚  Size: 1.2 GB                                              â”‚
â”‚                                                            â”‚
â”‚  Data Types:                                               â”‚
â”‚    - Temperature (Â°C)                                      â”‚
â”‚    - Precipitation (mm)                                    â”‚
â”‚    - Wind speed (m/s)                                      â”‚
â”‚                                                            â”‚
â”‚  Used In Projects:                                         â”‚
â”‚    - Weather Dashboard                                     â”‚
â”‚    - Climate Analysis                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  C: Copy Source  O: Open URL  Escape: Back  Q: Quit        â”‚  â† Footer
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Add Dataset Screen

Form for creating or editing datasets.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEI DATAHUB - Add Dataset                                 â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Dataset ID:                                               â”‚
â”‚  [                                    ] (auto-generated)    â”‚
â”‚                                                            â”‚
â”‚  Dataset Name: *                                           â”‚
â”‚  [                                    ]                     â”‚
â”‚                                                            â”‚
â”‚  Description: *                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  Source: * (URL or code snippet)                           â”‚
â”‚  [                                    ] [Probe URL]         â”‚
â”‚                                                            â”‚
â”‚  Date Created:                                             â”‚
â”‚  [2024-10-04] (auto-filled)                                â”‚
â”‚                                                            â”‚
â”‚  Storage Location: *                                       â”‚
â”‚  [                                    ]                     â”‚
â”‚                                                            â”‚
â”‚  ... (more fields) ...                                     â”‚
â”‚                                                            â”‚
â”‚  [Save Dataset (Ctrl+S)]  [Cancel (Escape)]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Tab: Next  Shift+Tab: Previous  Ctrl+S: Save  Escape: Cancel  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Note:** Datasets are stored directly in Heibox cloud storage via WebDAV. Changes sync instantly to your team.

---

### Settings Screen

Configuration for Heibox integration and preferences.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEI DATAHUB - Settings                                    â”‚  â† Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Heibox/WebDAV Configuration                               â”‚
â”‚                                                            â”‚
â”‚  Server URL:                                               â”‚
â”‚  [https://heibox.uni-heidelberg.de]                        â”‚
â”‚                                                            â”‚
â”‚  Username:                                                 â”‚
â”‚  [your.username                   ]                         â”‚
â”‚                                                            â”‚
â”‚  WebDAV Password:                                          â”‚
â”‚  [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] (stored in keyring)    â”‚
â”‚                                                            â”‚
â”‚  Library ID:                                               â”‚
â”‚  [abc123-def456-ghi789            ]                         â”‚
â”‚                                                            â”‚
â”‚  Connection Status:                                        â”‚
â”‚  â˜ Connected and synced                                    â”‚
â”‚                                                            â”‚
â”‚  ... (feature toggles) ...                                 â”‚
â”‚                                                            â”‚
â”‚  [Save (Ctrl+S)]  [Cancel (Escape)]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ctrl+S: Save  Escape: Cancel                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Panels & Widgets

### Header

Always visible at the top. Shows:

- **App name:** "HEI DATAHUB"
- **Current screen:** " - Settings", " - Details", etc.

### Banner

ASCII art logo displayed on Home screen. Adds visual flair and branding.

### Mode Indicator

Shows current input mode:

- **Mode: Normal** â€” Ready for keyboard shortcuts
- **Mode: Insert** â€” Typing in search or form fields

### GitHub Status

Indicates GitHub connection state:

| Indicator | Meaning |
|-----------|---------|
| **â— GitHub Connected** (green) | PAT configured and validated |
| **âš  GitHub Configured (connection failed)** (yellow) | PAT set but validation failed |
| **â—‹ GitHub Not Connected** (dim) | No PAT configured |

### Search Input

Single-line text input with placeholder text. Focus with ++slash++ key.

### Results Table

DataTable widget with three columns:

- **ID:** Dataset identifier (truncated if needed)
- **Name:** Dataset name (max 40 chars displayed)
- **Description:** Snippet from description (max 80 chars)

**Navigation:**

- ++j++ / ++k++ or arrow keys to move
- ++enter++ to open selected dataset

### Results Label

Shows result count:

- "All Datasets (12 total)"
- "Search Results (3 found)"
- "No results for 'xyz'"

### Footer

Context-sensitive keyboard shortcuts for current screen.

---

## Status Area

The **status area** includes:

1. **Mode Indicator** - Shows current search mode (Normal, Advanced)
2. **Heibox Connection Status** - Cloud sync status indicator
3. **Update Status** (if available)

**Heibox status indicators:**

- `â˜ Synced to Hei-box` - Connected and synced successfully
- `âš  Hei-box Configured (connection failed)` - Credentials configured but connection failed
- `â—‹ Hei-box Not Connected` - No WebDAV credentials configured

**Update status example:**

```
âš  Update available: v0.60.0-beta (you're on v0.59.0-beta)
```

**How to configure Heibox:** Run `hei-datahub auth setup` to configure WebDAV credentials.

---

## Customization

### Color Scheme

Hei-DataHub supports **12+ built-in themes** configurable via `~/.config/hei-datahub/config.yaml`:

```yaml
theme: "gruvbox"  # or "dracula", "nord", "catppuccin", etc.
```

**Available themes:**
- catppuccin
- dracula
- gruvbox
- monokai
- nord
- one-dark
- rose-pine
- solarized
- tokyo-night
- and more...

See [Theme Customization](../how-to/09-change-theme.md) for details.

### Keybindings

Keybindings are **fully customizable** via `~/.config/hei-datahub/config.yaml`:

```yaml
keybindings:
  add_dataset: "ctrl+n"   # Change from default 'a'
  search: "ctrl+f"        # Change from default '/'
  quit: "ctrl+q"          # Change from default 'q'
```

See [Customize Keybindings](../how-to/08-customize-keybindings.md) for complete guide.

---

## Responsive Behavior

Hei-DataHub adapts to terminal size:

- **Minimum width:** 80 columns
- **Minimum height:** 24 rows
- **Tables:** Truncate long text with "..."
- **Descriptions:** Wrap multi-line text

**Tip:** For best experience, use a terminal with at least **100x30** characters.

---

## Accessibility

### Screen Readers

Textual supports screen readers, but Hei-DataHub has not been specifically tested. Contributions welcome!

### High Contrast

Use your terminal's high-contrast theme. Hei-DataHub respects terminal color settings.

### Font Scaling

Increase font size in your terminal emulator:

- **macOS:** `Cmd+Plus`
- **Linux (GNOME Terminal):** `Ctrl+Plus`
- **Windows Terminal:** `Ctrl+Plus`

---

## Performance Notes

### Search Performance

**Search latency:** <80ms average (with FTS5 index)

**Search debouncing:** 150ms to avoid excessive queries while typing

**Why?** Smooth UX without lag, even with large datasets.

### Startup Performance

**Cold start:** <1 second on modern hardware
**Warm start:** <300ms (with warm cache)

**Background indexing:** Runs every 15 minutes without blocking UI

### Dataset Details Load

Opening Details Screen queries SQLite **once** to fetch full payload.

**Performance:** <10ms for typical datasets (tested with 1000+ datasets).

### Table Rendering

Results table uses **lazy loading** â€” only visible rows are rendered.

**Why?** Fast scrolling even with hundreds of results.

---

## Tips & Tricks

### Quick Copy

On Details Screen, press ++c++ to copy the `source` field to clipboard. Useful for pasting into notebooks or terminals.

### Open URLs

If `source` is a valid URL, press ++o++ on Details Screen to open in default browser.

### Jump to Top/Bottom

- ++g+g++ â†’ First result
- ++shift+g++ â†’ Last result

Useful for large result sets.

### Clear Search Fast

Press ++escape++ twice:

1. First press: Exit insert mode
2. Second press: Clear search

### Instant Team Visibility

Datasets saved in the TUI are **instantly visible to your team** via Heibox cloud sync. No PR workflow needed!

---

## Known Issues

### Terminal Emulator Compatibility

**Works well:**

- Alacritty
- iTerm2 (macOS)
- GNOME Terminal
- Windows Terminal
- Kitty

**May have issues:**

- tmux (some key combinations may conflict)
- screen (limited color support)
- Older terminals with limited Unicode support

### Key Conflicts

If running inside tmux/screen, some keys may conflict:

- ++ctrl+s++ (save) may trigger terminal flow control
- ++ctrl+q++ (quit) may resume terminal flow

**Fix:**

```bash
# Disable flow control (add to ~/.zshrc or ~/.bashrc)
stty -ixon
```
# Disable flow control
stty -ixon
```

---

## Next Steps

- **[Data & SQL](11-data-and-sql.md)** â€” Understand the storage layer
- **[Configuration](12-config.md)** â€” Customize Hei-DataHub
- **[FAQ](../help/90-faq.md)** â€” Troubleshooting common UI issues
